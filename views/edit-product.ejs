<%- include('header', { title: "input products"})%>
<h1 class="container justify-content-center form-container">
  Edit Product
</h1>
<div class="container justify-content-center form-container">
  <div class="entry-single">
<form action="/products/<%=product[0].id%>/edit?_method=PUT" method="POST">
      
      <label for="description">Description:</label><br/>
     <input type="text" id="description" name="description" value="<%=product[0].description%>"><br/>

     <label for="buyer">Buyer:</label><br />
     <select name="buyer_id">
       <% buyerList.forEach(e=>{%>
         <option value="<%=e.id%>" id="<%=e.id%>"><%=e.buyer_name%></option>
       <%})%>
     </select>
      <br/>

      <label for="weld_counter">Weld Counter:</label><br/>
      <input type="integer" id="weld_counter" name="weld_counter" value="<%=product[0].weld_counter%>"/><br />

       <label for="polish_counter">Polish Counter:</label><br/>
      <input type="integer" id="polish_counter" name="polish_counter" value="<%=product[0].polish_counter%>"/><br />

       <label for="weave_counter">Weave Counter:</label><br/>
      <input type="integer" id="weave_counter" name="weave_counter" value="<%=product[0].weave_counter%>"/><br />
  

      <input type="submit" value="Submit" />
    </form> 


   
  </div>
</div>
<script>
  // selects buyer dropdown option to reflect database information for current product page
console.log('script running')
const productObj = <%-JSON.stringify(product[0])%>;
const currentBuyer = productObj.buyer_id
console.log(currentBuyer)

const selectCurrentBuyer = () => {document.getElementById(`${currentBuyer}`).selected = 'true';
}
selectCurrentBuyer()
</script>
<%- include('footer')%>



